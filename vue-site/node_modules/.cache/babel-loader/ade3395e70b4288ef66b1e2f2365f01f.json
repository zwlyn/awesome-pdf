{"remainingRequest":"D:\\workspace\\zw\\awesome-pdf\\vue-site\\node_modules\\babel-loader\\lib\\index.js!D:\\workspace\\zw\\awesome-pdf\\vue-site\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\workspace\\zw\\awesome-pdf\\vue-site\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workspace\\zw\\awesome-pdf\\vue-site\\src\\views\\pdftotext\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workspace\\zw\\awesome-pdf\\vue-site\\src\\views\\pdftotext\\index.vue","mtime":1586080771528},{"path":"D:\\workspace\\zw\\awesome-pdf\\vue-site\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577960050320},{"path":"D:\\workspace\\zw\\awesome-pdf\\vue-site\\node_modules\\babel-loader\\lib\\index.js","mtime":1577960100595},{"path":"D:\\workspace\\zw\\awesome-pdf\\vue-site\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577960050320},{"path":"D:\\workspace\\zw\\awesome-pdf\\vue-site\\node_modules\\vue-loader\\lib\\index.js","mtime":1577960037517}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci50by1maXhlZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5wYXJzZS1mbG9hdCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFjdGl2ZU5hbWVzOiAwLAogICAgICBhY3Rpb246IHRoaXMuJGNsaWVudC5hcGlVcmxwcmVmaXgoKSArICcvcmVwb3J0bWFuYWdlL3VwbG9hZC9wZGYnLAogICAgICBtdWx0aXBsZTogZmFsc2UsCiAgICAgIGZpbGVMaXN0OiBbXSwKICAgICAgZ2xpZGVyX2lkOiB0aGlzLiRyb3V0ZS5wYXJhbXNbImlkIl0sCiAgICAgIHdyaXRlUHJvZ3Jlc3M6IDAsCiAgICAgIHJlYWRQcm9ncmVzczogMCwKICAgICAgZmlsZVR5cGU6ICJzdGF0ZSIsCiAgICAgIHByb2ZpbGVfaWQ6IDEsCiAgICAgIGZpbGVuYW1lOiAiIiwKICAgICAgdXJsOiBudWxsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHt9LAogIG1ldGhvZHM6IHsKICAgIHBkZnRvdGV4dDogZnVuY3Rpb24gcGRmdG90ZXh0KCkgewogICAgICB2YXIgX3RoYXQgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2codGhpcy5maWxlTGlzdFswXSk7CiAgICAgIHZhciB1cGxvYWRQYXRoID0gInVwbG9hZGZpbGVzXFwiICsgdGhpcy5maWxlTGlzdFswXS5uYW1lOwogICAgICB0aGlzLiRheGlvcy5wb3N0KHRoaXMuJGNsaWVudC5hcGlVcmxwcmVmaXgoKSArICIvcmVwb3J0bWFuYWdlL3BkZnRvdGV4dCIsIHsKICAgICAgICB1cGxvYWRQYXRoOiB1cGxvYWRQYXRoCiAgICAgIH0sIGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CgogICAgICAgIF90aGF0LiRjbGllbnQubm90aWZ5U3VjY2VzcyhfdGhhdCwgIui9rOaNouaIkOWKn++8jOWPr+S7peS4i+i9veS6higqXl9eKikiKTsKICAgICAgfSk7IC8vdGhpcy5maWxlTGlzdCA9IFtdCiAgICB9LAogICAgZG93bmxvYWRUZXh0OiBmdW5jdGlvbiBkb3dubG9hZFRleHQoKSB7CiAgICAgIHZhciB0ZXh0UGF0aCA9ICJ1cGxvYWRmaWxlc1xcIiArIHRoaXMuZmlsZUxpc3RbMF0ubmFtZS5yZXBsYWNlKCJwZGYiLCAidHh0Iik7CiAgICAgIHRoaXMuJGF4aW9zLnBvc3QodGhpcy4kY2xpZW50LmFwaVVybHByZWZpeCgpICsgIi9yZXBvcnRtYW5hZ2UvZG93bmxvYWRUZXh0IiwgewogICAgICAgIHRleHRQYXRoOiB0ZXh0UGF0aAogICAgICB9LCBmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgLy9sZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICAvL2xldCByZXMgPSBhd2FpdCBwb3N0KHVybCwgZm9ybURhdGEpOwogICAgICAgIHZhciBjb25lbnQgPSByZXMuZGF0YTsgLy8gY29uc29sZS5sb2coY29uZW50KTsKCiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtjb25lbnRdKTsKICAgICAgICBjb25zb2xlLmxvZyhibG9iKTsKICAgICAgICB2YXIgZmlsZU5hbWUgPSAi57+76K+R57uT5p6cLnR4dCI7IC8vcmVzLmRhdGEubmFtZS5yZXBsYWNlKCJwZGYiLCAidHh0IikKCiAgICAgICAgdmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgbGluay5kb3dubG9hZCA9IGZpbGVOYW1lOyAvLyBh5qCH562+5re75Yqg5bGe5oCnCgogICAgICAgIGxpbmsuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICBsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7CiAgICAgICAgbGluay5jbGljaygpOyAvLyDmiafooYzkuIvovb0KCiAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChsaW5rLmhyZWYpOyAvLyDph4rmlL51cmwKCiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKTsgLy8g6YeKCiAgICAgIH0pOwogICAgfSwKICAgIGNsZWFyUGRmTGlzdDogZnVuY3Rpb24gY2xlYXJQZGZMaXN0KCkgewogICAgICB2YXIgX3RoYXQgPSB0aGlzOwoKICAgICAgdGhpcy4kYXhpb3MuZ2V0KHRoaXMuJGNsaWVudC5hcGlVcmxwcmVmaXgoKSArICIvcmVwb3J0bWFuYWdlL2NsZWFyUGRmTGlzdCIsIHt9LCBmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEubWVzc2FnZSk7CiAgICAgICAgX3RoYXQuZmlsZUxpc3QgPSBbXTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlUmVtb3ZlOiBmdW5jdGlvbiBoYW5kbGVSZW1vdmUoZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgY29uc29sZS5sb2coZmlsZSwgZmlsZUxpc3QpOwogICAgfSwKICAgIGhhbmRsZVByZXZpZXc6IGZ1bmN0aW9uIGhhbmRsZVByZXZpZXcoZmlsZSkgewogICAgICBjb25zb2xlLmxvZyhmaWxlKTsKICAgIH0sCiAgICBiZWZvcmVSZW1vdmU6IGZ1bmN0aW9uIGJlZm9yZVJlbW92ZShmaWxlLCBmaWxlTGlzdCkgewogICAgICBjb25zb2xlLmxvZyhmaWxlLCBmaWxlTGlzdCk7CiAgICAgIHJldHVybiB0aGlzLiRjb25maXJtKCJcdTc4NkVcdTVCOUFcdTc5RkJcdTk2NjQgIi5jb25jYXQoZmlsZS5uYW1lLCAiXHVGRjFGIikpOwogICAgfSwKICAgIGhhbmRsZVByb2dyZXNzOiBmdW5jdGlvbiBoYW5kbGVQcm9ncmVzcyhldmVudCwgZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgY29uc29sZS5sb2coZXZlbnQsIGZpbGUsIGZpbGVMaXN0KTsKICAgICAgdGhpcy53cml0ZVByb2dyZXNzID0gcGFyc2VGbG9hdChldmVudC5wZXJjZW50LnRvRml4ZWQoMikpOwogICAgfSwKICAgIGhhbmRsZVN1Y2VzczogZnVuY3Rpb24gaGFuZGxlU3VjZXNzKHJlc3BvbnNlLCBmaWxlLCBmaWxlTGlzdCkgewogICAgICB0aGlzLmZpbGVMaXN0ID0gZmlsZUxpc3Q7CiAgICAgIGNvbnNvbGUubG9nKGV2ZW50LCBmaWxlLCBmaWxlTGlzdCk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgey8vIHZhciBfdGhhdCA9IHRoaXM7CiAgICAvLyB0aGlzLiRjbGllbnQubm90aWZ5d3Mubm90aWZ5QnVzLiRvbigicGRmTGlzdCIsIGZ1bmN0aW9uKHJlcykgewogICAgLy8gICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSkKICAgIC8vICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpCiAgICAvLyAgICAgICAgIF90aGF0LmZpbGVMaXN0ID0gcmVzLmRhdGEKICAgIC8vICAgICB9KQogIH0KfTs="},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\r\n    <el-row class=\"el-row\">\r\n        <el-col :span=\"8\">\r\n            <el-form :inline=\"true\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n                <el-form-item>\r\n                    <el-button style=\"margin-left: 10px;\" size=\"small\" type=\"success\" @click=\"pdftotext\">pdf转文本</el-button>\r\n                    <el-button style=\"margin-left: 10px;\" size=\"small\" type=\"primary\" @click=\"downloadText\">下载文本</el-button>\r\n                    <el-button style=\"margin-left: 10px;\" size=\"small\" type=\"primary\" @click=\"clearPdfList\">清空数据</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n            <el-upload class=\"upload-demo\" drag :action=\"action\" :multiple=\"multiple\" :on-preview=\"handlePreview\"\r\n                :on-remove=\"handleRemove\" :before-remove=\"beforeRemove\" :on-progress=\"handleProgress\" :on-success=\"handleSucess\"\r\n                :file-list=\"fileList\" name=pdf :limit=\"10\" style=\"height: 1000px; margin: 10px;\">\r\n                <i class=\"el-icon-upload\"></i>\r\n                <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n                <div class=\"el-upload__tip\" slot=\"tip\">只能上传pdf文件</div>\r\n            </el-upload>\r\n        </el-col>\r\n        <el-col :span=\"12\">\r\n            <div class=\"pdfpreview\">\r\n                <object :data=url type=\"application/pdf\" width=\"65%\" height=\"100%\" internalinstanceid=\"41\"></object>\r\n            </div>\r\n        </el-col>\r\n    </el-row>\r\n\r\n</template>\r\n<script>\r\n    export default {\r\n        data() {\r\n            return {\r\n                activeNames: 0,\r\n                action: this.$client.apiUrlprefix() + '/reportmanage/upload/pdf',\r\n                multiple: false,\r\n                fileList: [],\r\n                glider_id: this.$route.params[\"id\"],\r\n                writeProgress: 0,\r\n                readProgress: 0,\r\n                fileType: \"state\",\r\n                profile_id: 1,\r\n                filename: \"\",\r\n                url: null\r\n            };\r\n        },\r\n        computed: {\r\n        },\r\n        methods: {\r\n            pdftotext() {\r\n                var _that = this\r\n                console.log(this.fileList[0])\r\n                let uploadPath = \"uploadfiles\\\\\" + this.fileList[0].name\r\n                this.$axios.post(this.$client.apiUrlprefix() + \"/reportmanage/pdftotext\", {\r\n                    uploadPath: uploadPath\r\n                }, function(res) {\r\n                    console.log(res.data)\r\n                     _that.$client.notifySuccess(_that, \"转换成功，可以下载了(*^_^*)\");\r\n                })\r\n                //this.fileList = []\r\n            },\r\n            downloadText() {\r\n                let textPath = \"uploadfiles\\\\\" + this.fileList[0].name.replace(\"pdf\", \"txt\")\r\n                this.$axios.post(this.$client.apiUrlprefix() + \"/reportmanage/downloadText\", {\r\n                    textPath: textPath\r\n                }, function(res) {\r\n\r\n                    //let formData = new FormData();\r\n                    //let res = await post(url, formData);\r\n                    const conent = res.data\r\n                    // console.log(conent);\r\n                    console.log(res)\r\n                    const blob = new Blob([conent])\r\n                    console.log(blob)\r\n                    const fileName = \"翻译结果.txt\"//res.data.name.replace(\"pdf\", \"txt\")\r\n                    const link = document.createElement('a')\r\n                    link.download = fileName // a标签添加属性\r\n                    link.style.display = 'none'\r\n                    link.href = URL.createObjectURL(blob)\r\n                    document.body.appendChild(link)\r\n                    link.click() // 执行下载\r\n                    URL.revokeObjectURL(link.href) // 释放url\r\n                    document.body.removeChild(link) // 释\r\n                })\r\n            },\r\n            clearPdfList() {\r\n                var _that = this\r\n                this.$axios.get(this.$client.apiUrlprefix() + \"/reportmanage/clearPdfList\", {}, function(res) {\r\n                    console.log(res.data.message)\r\n                    _that.fileList = []\r\n                })\r\n            },\r\n            handleRemove(file, fileList) {\r\n                console.log(file, fileList)\r\n            },\r\n            handlePreview(file) {\r\n                console.log(file);\r\n            },\r\n            beforeRemove(file, fileList) {\r\n                console.log(file, fileList)\r\n                return this.$confirm(`确定移除 ${ file.name }？`);\r\n            },\r\n            handleProgress(event, file, fileList) {\r\n                console.log(event, file, fileList);\r\n                this.writeProgress = parseFloat(event.percent.toFixed(2));\r\n            },\r\n            handleSucess(response, file, fileList) {\r\n                this.fileList = fileList;\r\n                console.log(event, file, fileList)\r\n            }\r\n        },\r\n        mounted() {\r\n            // var _that = this;\r\n            // this.$client.notifyws.notifyBus.$on(\"pdfList\", function(res) {\r\n            //         console.log(res.data)\r\n            //         console.log(res.data)\r\n            //         _that.fileList = res.data\r\n            //     })\r\n        }\r\n    }\r\n</script>\r\n<style>\r\n    /*    .el-upload {\r\n        height: 1000px;\r\n    } */\r\n\r\n    .el-container {\r\n        /*设置内部填充为0，几个布局元素之间没有间距*/\r\n        padding: 0px;\r\n        /*外部间距也是如此设置*/\r\n        margin: 0px;\r\n        /*统一设置高度为100%*/\r\n        height: 100%;\r\n        width: 100%;\r\n    }\r\n\r\n    #app {\r\n        /*设置内部填充为0，几个布局元素之间没有间距*/\r\n        padding: 0px;\r\n        /*外部间距也是如此设置*/\r\n        margin: 0px;\r\n        /*统一设置高度为100%*/\r\n        height: 100%;\r\n        width: 100%;\r\n    }\r\n\r\n    .pdfpreview {\r\n        height: calc(100% - 50px);\r\n        width: 100%;\r\n        position: absolute;\r\n        top: 45px;\r\n        z-index: 999;\r\n    }\r\n</style>\n"],"sourceRoot":"src/views/pdftotext"}]}