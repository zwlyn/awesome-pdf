{"remainingRequest":"D:\\workspace\\yfjz\\leming-reportdesigner\\vue-sites\\node_modules\\babel-loader\\lib\\index.js!D:\\workspace\\yfjz\\leming-reportdesigner\\vue-sites\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\workspace\\yfjz\\leming-reportdesigner\\vue-sites\\src\\api\\notifywsapi.js","dependencies":[{"path":"D:\\workspace\\yfjz\\leming-reportdesigner\\vue-sites\\src\\api\\notifywsapi.js","mtime":1578033194670},{"path":"D:\\workspace\\yfjz\\leming-reportdesigner\\vue-sites\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577960050320},{"path":"D:\\workspace\\yfjz\\leming-reportdesigner\\vue-sites\\node_modules\\babel-loader\\lib\\index.js","mtime":1577960100595},{"path":"D:\\workspace\\yfjz\\leming-reportdesigner\\vue-sites\\node_modules\\eslint-loader\\index.js","mtime":1577960024667}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFZ1ZSBmcm9tICJ2dWUiOwp2YXIgbm90aWZ5d3MgPSBuZXcgV2ViU29ja2V0KCJ3czovLyIgKyBkb2N1bWVudC5kb21haW4gKyAiOjg4MDAvd3MvYXBpL3YxL25vdGlmeSIpOwp3aW5kb3cubm90aWZ5d3MgPSBub3RpZnl3czsKbm90aWZ5d3Mubm90aWZ5QnVzID0gbmV3IFZ1ZSgpOwoKbm90aWZ5d3Mub25vcGVuID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgY29uc29sZS5sb2coIm5vdGlmeXdzIHdlYnNvY2tldCBpcyBjb25uZXRlZCEiLCBldmVudCk7Cn07Cgpub3RpZnl3cy5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICB2YXIgbWVzc2FnZSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7CiAgY29uc29sZS5sb2cobWVzc2FnZSk7CiAgY29uc29sZS5sb2cobWVzc2FnZVsidHlwZSJdKTsKICBub3RpZnl3cy5ub3RpZnlCdXMuJGVtaXQobWVzc2FnZVsidHlwZSJdLCBtZXNzYWdlKTsKfTsKCm5vdGlmeXdzLm9uZXJyb3IgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICBjb25zb2xlLmxvZyhldmVudCk7Cn07Cgpub3RpZnl3cy5vbmNsb3NlID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgLy8g5YWz6ZetIHdlYnNvY2tldAogIGNvbnNvbGUubG9nKCJub3RpZnl3cyB3ZWJzb2NrZXQgaXMgY29sb3NlZCEiLCBldmVudCk7CiAgbm90aWZ5d3MgPSBuZXcgV2ViU29ja2V0KCJ3czovLyIgKyBkb2N1bWVudC5kb21haW4gKyAiOjg4MDAvd3MvYXBpL3YxL25vdGlmeSIpOwp9OwoKZXhwb3J0IGRlZmF1bHQgbm90aWZ5d3M7"},{"version":3,"sources":["D:/workspace/yfjz/leming-reportdesigner/vue-sites/src/api/notifywsapi.js"],"names":["Vue","notifyws","WebSocket","document","domain","window","notifyBus","onopen","event","console","log","onmessage","message","JSON","parse","data","$emit","onerror","onclose"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,KAAhB;AAEA,IAAIC,QAAQ,GAAG,IAAIC,SAAJ,CAAc,UAAUC,QAAQ,CAACC,MAAnB,GAA4B,wBAA1C,CAAf;AAEAC,MAAM,CAACJ,QAAP,GAAkBA,QAAlB;AAEAA,QAAQ,CAACK,SAAT,GAAqB,IAAIN,GAAJ,EAArB;;AAEAC,QAAQ,CAACM,MAAT,GAAkB,UAASC,KAAT,EAClB;AACEC,EAAAA,OAAO,CAACC,GAAR,CAAY,iCAAZ,EAA+CF,KAA/C;AACD,CAHD;;AAKAP,QAAQ,CAACU,SAAT,GAAqB,UAAUH,KAAV,EAAiB;AACpC,MAAII,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWN,KAAK,CAACO,IAAjB,CAAd;AACAN,EAAAA,OAAO,CAACC,GAAR,CAAYE,OAAZ;AACAH,EAAAA,OAAO,CAACC,GAAR,CAAYE,OAAO,CAAC,MAAD,CAAnB;AACAX,EAAAA,QAAQ,CAACK,SAAT,CAAmBU,KAAnB,CAAyBJ,OAAO,CAAC,MAAD,CAAhC,EAA0CA,OAA1C;AACD,CALD;;AAOAX,QAAQ,CAACgB,OAAT,GAAmB,UAAUT,KAAV,EAAiB;AAChCC,EAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,CAFD;;AAKAP,QAAQ,CAACiB,OAAT,GAAmB,UAASV,KAAT,EACnB;AACE;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ,EAA8CF,KAA9C;AACAP,EAAAA,QAAQ,GAAG,IAAIC,SAAJ,CAAc,UAAUC,QAAQ,CAACC,MAAnB,GAA4B,wBAA1C,CAAX;AACD,CALD;;AAOA,eAAeH,QAAf","sourcesContent":["import Vue from \"vue\"\r\n\r\nvar notifyws = new WebSocket(\"ws://\" + document.domain + \":8800/ws/api/v1/notify\");\r\n\r\nwindow.notifyws = notifyws;\r\n\r\nnotifyws.notifyBus = new Vue();\r\n\r\nnotifyws.onopen = function(event)\r\n{\r\n  console.log(\"notifyws websocket is conneted!\", event);\r\n};\r\n\r\nnotifyws.onmessage = function (event) {\r\n  var message = JSON.parse(event.data);\r\n  console.log(message);\r\n  console.log(message[\"type\"]);\r\n  notifyws.notifyBus.$emit(message[\"type\"], message);\r\n};\r\n\r\nnotifyws.onerror = function (event) {\r\n    console.log(event);\r\n};\r\n\r\n\r\nnotifyws.onclose = function(event)\r\n{ \r\n  // 关闭 websocket\r\n  console.log(\"notifyws websocket is colosed!\", event);\r\n  notifyws = new WebSocket(\"ws://\" + document.domain + \":8800/ws/api/v1/notify\");\r\n};\r\n\r\nexport default notifyws;\r\n"]}]}