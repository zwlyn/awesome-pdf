{"remainingRequest":"D:\\workspace\\yfjz\\leming-webapiscraper\\vue-sites\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workspace\\yfjz\\leming-webapiscraper\\vue-sites\\src\\views\\caserecord\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workspace\\yfjz\\leming-webapiscraper\\vue-sites\\src\\views\\caserecord\\index.vue","mtime":1577158449718},{"path":"D:\\workspace\\yfjz\\leming-webapiscraper\\vue-sites\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace\\yfjz\\leming-webapiscraper\\vue-sites\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\workspace\\yfjz\\leming-webapiscraper\\vue-sites\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace\\yfjz\\leming-webapiscraper\\vue-sites\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCglpbXBvcnQgSHR0cENhcmQgZnJvbSAiQC92aWV3cy9jYXNlcmVjb3JkL2h0dHBjYXJkLnZ1ZSIKCglleHBvcnQgZGVmYXVsdCB7CgkJZGF0YSgpIHsKCQkJcmV0dXJuIHsKCQkJCSJuYW1lIjogIiIsCgkJCQkiZGVzY3JpcHRpb24iOiAiIiwKCQkJCSJtaXgiOiAiIiwKCQkJCSJ0YWJsZURhdGEiOiBbXSwKCQkJCSJzdGF0dXMiOiAiIiwKCQkJCSJjb3VsZFRlc3QiOiBmYWxzZQoJCQl9CgkJfSwKCQljb21wb25lbnRzOiB7CgkJCUh0dHBDYXJkCgkJfSwKCQltZXRob2RzOiB7CgkJCU9uUmVzcG9uc2UoY2FzZXMpIHsKCQkJCXZhciB0YWJsZURhdGEgPSBbXQoJCQkJdGhpcy5jb3VsZFRlc3QgPSB0cnVlCgkJCQlmb3IgKHZhciBpID0gMDsgaSA8IGNhc2VzLmxlbmd0aDsgaSsrKSB7CgkJCQkJaWYgKHRoaXMubmFtZSA9PT0gY2FzZXNbaV0ubmFtZSkgewoJCQkJCQl2YXIgYXBpcyA9IGNhc2VzW2ldLmFwaXM7CgkJCQkJCWZvciAodmFyIGogPSAwOyBqIDwgYXBpcy5sZW5ndGg7IGorKykgewoJCQkJCQkJdmFyIGl0ZW0gPSBhcGlzW2pdCgkJCQkJCQlpZihhcGlzW2pdLnJhd1Jlc3BvbnNlKXsKCQkJCQkJCQl0YWJsZURhdGEucHVzaChpdGVtKQoJCQkJCQkJfQoJCQkJCQkJZWxzZXsKCQkJCQkJCQl0aGlzLmNvdWxkVGVzdCA9IGZhbHNlIAoJCQkJCQkJfQoJCQkJaWYodGhpcy5jb3VsZFRlc3QpewoJCQkJCXRoaXMuc3RhdHVzID0gIuivt+axgui/lOWbnuWujOavle+8jOWPr+S7peWBnOatouW9leWItiIKCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJCXRoaXMudGFibGVEYXRhID0gdGFibGVEYXRhCgkJCX0sCgkJCXN0YXJ0UmVjb3JkKCkgewoJCQkJdGhpcy5zdGF0dXMgPSAi5q2j5Zyo6L+b6KGM5b2V5Yi2LOivt+S4jeimgeWBnOatouW9leWItiIKCQkJCWNvbnNvbGUubG9nKHRoaXMubmFtZSwgdGhpcy5kZXNjcmlwdGlvbikKCQkJCXZhciBkYXRhID0gewoJCQkJCSJjYXNlSUQiOiB0aGlzLm5hbWUsCgkJCQkJImRlc2NyaXB0aW9uIjogdGhpcy5kZXNjcmlwdGlvbiwKCQkJCQkibWl4IjogdGhpcy5taXgKCQkJCX0KICAgICAgICAgICAgICAgIHZhciBfdGhhdCA9IHRoaXM7CgkJCQl0aGlzLiRheGlvcy5wb3N0KHRoaXMuJGNsaWVudC5hcGlVcmxwcmVmaXgoKSArICIvd2ViYXBpc2NyYXBlci9tb25pdG9yL3N0YXJ0IiwgZGF0YSwgZnVuY3Rpb24ocmVzKSB7CgkJCQkJY29uc29sZS5sb2cocmVzKQoJCQkJCWlmKHJlcy5kYXRhLnJldGNvZGUgPT09IDApewoJCQkJCQlfdGhhdC4kY2xpZW50Lm5vdGlmeVN1Y2Nlc3MoX3RoYXQsIHJlcy5kYXRhLm1lc3NhZ2UsIDMwMDApOwoJCQkJCX0KCQkJCQllbHNlewoJCQkJCQlfdGhhdC4kY2xpZW50Lm5vdGlmeUVycm9yKF90aGF0LCByZXMuZGF0YS5tZXNzYWdlLCAzMDAwKTsKCQkJCQl9CgkJCQkJCgkJCQl9KQoJCQl9LAoJCQlzdG9wUmVjb3JkKCkgewoJCQkJdGhpcy5zdGF0dXMgPSAi5bey5YGc5q2i5b2V5Yi2IgoJCQkJdmFyIF90aGF0ID0gdGhpczsKCQkJCWNvbnNvbGUubG9nKHRoaXMubmFtZSwgdGhpcy5kZXNjcmlwdGlvbikKCQkJCXZhciBkYXRhID0gewoJCQkJCSJjYXNlSUQiOiB0aGlzLm5hbWUsCgkJCQkJImRlc2NyaXB0aW9uIjogdGhpcy5kZXNjcmlwdGlvbgoJCQkJfQoJCQkJdGhpcy4kYXhpb3MucG9zdCh0aGlzLiRjbGllbnQuYXBpVXJscHJlZml4KCkgKyAiL3dlYmFwaXNjcmFwZXIvbW9uaXRvci9lbmQiLCBkYXRhLCBmdW5jdGlvbihyZXMpIHsKCQkJCQljb25zb2xlLmxvZyhyZXMpCgkJCQkJaWYocmVzLmRhdGEucmV0Y29kZSA9PT0gMCl7CgkJCQkJCV90aGF0LiRjbGllbnQubm90aWZ5U3VjY2VzcyhfdGhhdCwgcmVzLmRhdGEubWVzc2FnZSwgMzAwMCk7CgkJCQkJfQoJCQkJCWVsc2V7CgkJCQkJCV90aGF0LiRjbGllbnQubm90aWZ5RXJyb3IoX3RoYXQsIHJlcy5kYXRhLm1lc3NhZ2UsIDMwMDApOwoJCQkJCX0KCQkJCX0pCgkJCX0sCgkJCXRlc3RBbGwoKSB7CgkJCQl2YXIgdGhhdCA9IHRoaXMKCQkJCXRoaXMuc3RhdHVzID0gIuato+WcqOa1i+ivleS4rS4uLiIKCQkJCXRoaXMuJGF4aW9zLnBvc3QodGhpcy4kY2xpZW50LmFwaVVybHByZWZpeCgpICsgIi93ZWJhcGlzY3JhcGVyL3Rlc3RBbGwiLCB0aGlzLnRhYmxlRGF0YSwgZnVuY3Rpb24ocmVzKSB7CgkJCQkJY29uc29sZS5sb2cocmVzLmRhdGEubWVzc2FnZSkKCQkJCQkvL2FsZXJ0KHJlcy5kYXRhLm1lc3NhZ2UpCgkJCQkJbGV0IHRlc3RBcGlzID0gcmVzLmRhdGEubWVzc2FnZQoJCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgdGVzdEFwaXMubGVuZ3RoOyBpKyspIHsKCQkJCQkJaWYgKHRlc3RBcGlzW2ldLnN0YXR1cyA9PT0gIkZhaWxlZCIpIHRoYXQuc3RhdHVzID0gdGhhdC5uYW1lICsgJyDmtYvor5XkuI3pgJrov4chJwoJCQkJCX0KCQkJCQlpZiAoaSA+PSB0ZXN0QXBpcy5sZW5ndGgpIHRoYXQuc3RhdHVzID0gdGhhdC5uYW1lICsgJyDmtYvor5XpgJrov4chJwoJCQkJCXRoYXQudGFibGVEYXRhID0gdGVzdEFwaXMKCQkJCX0pCgkJCX0KCQl9LAoJCW1vdW50ZWQoKSB7CgkJCXZhciBfdGhhdCA9IHRoaXM7CgkJCXRoaXMuJGNsaWVudC5ub3RpZnl3cy5ub3RpZnlCdXMuJG9uKCJSZXNwb25zZSIsIGZ1bmN0aW9uKHJlcykgewoJCQkJCV90aGF0Lk9uUmVzcG9uc2UocmVzLmRhdGEuY2FzZXMpCgkJCQl9KSwKCQkJCXRoaXMuJGF4aW9zLmdldCh0aGlzLiRjbGllbnQuYXBpVXJscHJlZml4KCkgKyAiL3dlYmFwaXNjcmFwZXIvcmVzdWx0Iiwge30sIGZ1bmN0aW9uKHJlcykgewoJCQkJCWNvbnNvbGUubG9nKHJlcykKCQkJCQlpZiAocmVzKSB7CgkJCQkJCWlmIChyZXMuZGF0YS5yZXRjb2RlID09IDApIHsKCQkJCQkJCWNvbnNvbGUubG9nKHJlcy5kYXRhLnJlc3VsdC5jYXNlcykKCQkJCQkJCV90aGF0Lk9uUmVzcG9uc2UocmVzLmRhdGEucmVzdWx0LmNhc2VzKQoJCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJCX0KCQkJCQl9CgkJCQl9KQoJCX0KCX0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/caserecord","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<el-form label-width=\"100px\" class=\"demo-ruleForm\">\r\n\t\t\t<el-form-item label=\"用例名称\">\r\n\t\t\t\t<el-input v-model=\"name\" autocomplete=\"off\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"描述信息\">\r\n\t\t\t\t<el-input v-model=\"description\" autocomplete=\"off\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"混合比\">\r\n\t\t\t\t<el-input v-model=\"mix\" autocomplete=\"off\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"startRecord()\">启动录制</el-button>\r\n\t\t\t\t<el-button @click=\"stopRecord()\">停止录制</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"testAll()\">测试用例</el-button>\r\n\t\t\t\t<p>状态: {{ status }}</p>\r\n<!-- \t\t\t\t<el-option label=\"状态\" :value=\"status\"></el-option> -->\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\r\n\t\t<el-table :data=\"tableData\" style=\"width: 100%\">\r\n\t\t\t<el-table-column type=\"expand\">\r\n\t\t\t\t<template slot-scope=\"props\">\r\n\t\t\t\t\t<http-card :api=\"props.row\"></http-card>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"Method\" prop=\"method\">\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"Url\" prop=\"simpleUrl\">\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column  prop=\"status\" label=\"状态\" width=\"100\" >\r\n\t\t\t\t<!-- <el-tag type=\"danger\" prop=\"status\"></el-tag> -->\r\n\t\t\t</el-table-column>\r\n\t\t</el-table>\r\n\t</div>\r\n</template>\r\n<script>\r\n\timport HttpCard from \"@/views/caserecord/httpcard.vue\"\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"description\": \"\",\r\n\t\t\t\t\"mix\": \"\",\r\n\t\t\t\t\"tableData\": [],\r\n\t\t\t\t\"status\": \"\",\r\n\t\t\t\t\"couldTest\": false\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tHttpCard\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tOnResponse(cases) {\r\n\t\t\t\tvar tableData = []\r\n\t\t\t\tthis.couldTest = true\r\n\t\t\t\tfor (var i = 0; i < cases.length; i++) {\r\n\t\t\t\t\tif (this.name === cases[i].name) {\r\n\t\t\t\t\t\tvar apis = cases[i].apis;\r\n\t\t\t\t\t\tfor (var j = 0; j < apis.length; j++) {\r\n\t\t\t\t\t\t\tvar item = apis[j]\r\n\t\t\t\t\t\t\tif(apis[j].rawResponse){\r\n\t\t\t\t\t\t\t\ttableData.push(item)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tthis.couldTest = false \r\n\t\t\t\t\t\t\t}\r\n\t\t\t\tif(this.couldTest){\r\n\t\t\t\t\tthis.status = \"请求返回完毕，可以停止录制\"\r\n\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.tableData = tableData\r\n\t\t\t},\r\n\t\t\tstartRecord() {\r\n\t\t\t\tthis.status = \"正在进行录制,请不要停止录制\"\r\n\t\t\t\tconsole.log(this.name, this.description)\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\t\"caseID\": this.name,\r\n\t\t\t\t\t\"description\": this.description,\r\n\t\t\t\t\t\"mix\": this.mix\r\n\t\t\t\t}\r\n                var _that = this;\r\n\t\t\t\tthis.$axios.post(this.$client.apiUrlprefix() + \"/webapiscraper/monitor/start\", data, function(res) {\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tif(res.data.retcode === 0){\r\n\t\t\t\t\t\t_that.$client.notifySuccess(_that, res.data.message, 3000);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\t_that.$client.notifyError(_that, res.data.message, 3000);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tstopRecord() {\r\n\t\t\t\tthis.status = \"已停止录制\"\r\n\t\t\t\tvar _that = this;\r\n\t\t\t\tconsole.log(this.name, this.description)\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\t\"caseID\": this.name,\r\n\t\t\t\t\t\"description\": this.description\r\n\t\t\t\t}\r\n\t\t\t\tthis.$axios.post(this.$client.apiUrlprefix() + \"/webapiscraper/monitor/end\", data, function(res) {\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tif(res.data.retcode === 0){\r\n\t\t\t\t\t\t_that.$client.notifySuccess(_that, res.data.message, 3000);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\t_that.$client.notifyError(_that, res.data.message, 3000);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\ttestAll() {\r\n\t\t\t\tvar that = this\r\n\t\t\t\tthis.status = \"正在测试中...\"\r\n\t\t\t\tthis.$axios.post(this.$client.apiUrlprefix() + \"/webapiscraper/testAll\", this.tableData, function(res) {\r\n\t\t\t\t\tconsole.log(res.data.message)\r\n\t\t\t\t\t//alert(res.data.message)\r\n\t\t\t\t\tlet testApis = res.data.message\r\n\t\t\t\t\tfor (var i = 0; i < testApis.length; i++) {\r\n\t\t\t\t\t\tif (testApis[i].status === \"Failed\") that.status = that.name + ' 测试不通过!'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (i >= testApis.length) that.status = that.name + ' 测试通过!'\r\n\t\t\t\t\tthat.tableData = testApis\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tvar _that = this;\r\n\t\t\tthis.$client.notifyws.notifyBus.$on(\"Response\", function(res) {\r\n\t\t\t\t\t_that.OnResponse(res.data.cases)\r\n\t\t\t\t}),\r\n\t\t\t\tthis.$axios.get(this.$client.apiUrlprefix() + \"/webapiscraper/result\", {}, function(res) {\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\tif (res.data.retcode == 0) {\r\n\t\t\t\t\t\t\tconsole.log(res.data.result.cases)\r\n\t\t\t\t\t\t\t_that.OnResponse(res.data.result.cases)\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.el-header,\r\n\t.el-footer {\r\n\t\tbackground-color: #B3C0D1;\r\n\t\tcolor: #333;\r\n\t\ttext-align: center;\r\n\t\tline-height: 200px;\r\n\t}\r\n</style>\r\n"]}]}