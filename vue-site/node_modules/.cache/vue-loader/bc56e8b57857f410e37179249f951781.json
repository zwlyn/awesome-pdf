{"remainingRequest":"D:\\workspace\\yfjz\\leming-webapiscraper\\vue-sites\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workspace\\yfjz\\leming-webapiscraper\\vue-sites\\src\\views\\caserecord\\index.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\workspace\\yfjz\\leming-webapiscraper\\vue-sites\\src\\views\\caserecord\\index.vue","mtime":1577158449718},{"path":"D:\\workspace\\yfjz\\leming-webapiscraper\\vue-sites\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace\\yfjz\\leming-webapiscraper\\vue-sites\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\workspace\\yfjz\\leming-webapiscraper\\vue-sites\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\workspace\\yfjz\\leming-webapiscraper\\vue-sites\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace\\yfjz\\leming-webapiscraper\\vue-sites\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZWwtaGVhZGVyLAouZWwtZm9vdGVyIHsKCWJhY2tncm91bmQtY29sb3I6ICNCM0MwRDE7Cgljb2xvcjogIzMzMzsKCXRleHQtYWxpZ246IGNlbnRlcjsKCWxpbmUtaGVpZ2h0OiAyMDBweDsKfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwJA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/caserecord","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<el-form label-width=\"100px\" class=\"demo-ruleForm\">\r\n\t\t\t<el-form-item label=\"用例名称\">\r\n\t\t\t\t<el-input v-model=\"name\" autocomplete=\"off\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"描述信息\">\r\n\t\t\t\t<el-input v-model=\"description\" autocomplete=\"off\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"混合比\">\r\n\t\t\t\t<el-input v-model=\"mix\" autocomplete=\"off\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"startRecord()\">启动录制</el-button>\r\n\t\t\t\t<el-button @click=\"stopRecord()\">停止录制</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"testAll()\">测试用例</el-button>\r\n\t\t\t\t<p>状态: {{ status }}</p>\r\n<!-- \t\t\t\t<el-option label=\"状态\" :value=\"status\"></el-option> -->\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\r\n\t\t<el-table :data=\"tableData\" style=\"width: 100%\">\r\n\t\t\t<el-table-column type=\"expand\">\r\n\t\t\t\t<template slot-scope=\"props\">\r\n\t\t\t\t\t<http-card :api=\"props.row\"></http-card>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"Method\" prop=\"method\">\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"Url\" prop=\"simpleUrl\">\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column  prop=\"status\" label=\"状态\" width=\"100\" >\r\n\t\t\t\t<!-- <el-tag type=\"danger\" prop=\"status\"></el-tag> -->\r\n\t\t\t</el-table-column>\r\n\t\t</el-table>\r\n\t</div>\r\n</template>\r\n<script>\r\n\timport HttpCard from \"@/views/caserecord/httpcard.vue\"\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"description\": \"\",\r\n\t\t\t\t\"mix\": \"\",\r\n\t\t\t\t\"tableData\": [],\r\n\t\t\t\t\"status\": \"\",\r\n\t\t\t\t\"couldTest\": false\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tHttpCard\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tOnResponse(cases) {\r\n\t\t\t\tvar tableData = []\r\n\t\t\t\tthis.couldTest = true\r\n\t\t\t\tfor (var i = 0; i < cases.length; i++) {\r\n\t\t\t\t\tif (this.name === cases[i].name) {\r\n\t\t\t\t\t\tvar apis = cases[i].apis;\r\n\t\t\t\t\t\tfor (var j = 0; j < apis.length; j++) {\r\n\t\t\t\t\t\t\tvar item = apis[j]\r\n\t\t\t\t\t\t\tif(apis[j].rawResponse){\r\n\t\t\t\t\t\t\t\ttableData.push(item)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tthis.couldTest = false \r\n\t\t\t\t\t\t\t}\r\n\t\t\t\tif(this.couldTest){\r\n\t\t\t\t\tthis.status = \"请求返回完毕，可以停止录制\"\r\n\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.tableData = tableData\r\n\t\t\t},\r\n\t\t\tstartRecord() {\r\n\t\t\t\tthis.status = \"正在进行录制,请不要停止录制\"\r\n\t\t\t\tconsole.log(this.name, this.description)\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\t\"caseID\": this.name,\r\n\t\t\t\t\t\"description\": this.description,\r\n\t\t\t\t\t\"mix\": this.mix\r\n\t\t\t\t}\r\n                var _that = this;\r\n\t\t\t\tthis.$axios.post(this.$client.apiUrlprefix() + \"/webapiscraper/monitor/start\", data, function(res) {\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tif(res.data.retcode === 0){\r\n\t\t\t\t\t\t_that.$client.notifySuccess(_that, res.data.message, 3000);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\t_that.$client.notifyError(_that, res.data.message, 3000);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tstopRecord() {\r\n\t\t\t\tthis.status = \"已停止录制\"\r\n\t\t\t\tvar _that = this;\r\n\t\t\t\tconsole.log(this.name, this.description)\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\t\"caseID\": this.name,\r\n\t\t\t\t\t\"description\": this.description\r\n\t\t\t\t}\r\n\t\t\t\tthis.$axios.post(this.$client.apiUrlprefix() + \"/webapiscraper/monitor/end\", data, function(res) {\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tif(res.data.retcode === 0){\r\n\t\t\t\t\t\t_that.$client.notifySuccess(_that, res.data.message, 3000);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\t_that.$client.notifyError(_that, res.data.message, 3000);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\ttestAll() {\r\n\t\t\t\tvar that = this\r\n\t\t\t\tthis.status = \"正在测试中...\"\r\n\t\t\t\tthis.$axios.post(this.$client.apiUrlprefix() + \"/webapiscraper/testAll\", this.tableData, function(res) {\r\n\t\t\t\t\tconsole.log(res.data.message)\r\n\t\t\t\t\t//alert(res.data.message)\r\n\t\t\t\t\tlet testApis = res.data.message\r\n\t\t\t\t\tfor (var i = 0; i < testApis.length; i++) {\r\n\t\t\t\t\t\tif (testApis[i].status === \"Failed\") that.status = that.name + ' 测试不通过!'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (i >= testApis.length) that.status = that.name + ' 测试通过!'\r\n\t\t\t\t\tthat.tableData = testApis\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tvar _that = this;\r\n\t\t\tthis.$client.notifyws.notifyBus.$on(\"Response\", function(res) {\r\n\t\t\t\t\t_that.OnResponse(res.data.cases)\r\n\t\t\t\t}),\r\n\t\t\t\tthis.$axios.get(this.$client.apiUrlprefix() + \"/webapiscraper/result\", {}, function(res) {\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\tif (res.data.retcode == 0) {\r\n\t\t\t\t\t\t\tconsole.log(res.data.result.cases)\r\n\t\t\t\t\t\t\t_that.OnResponse(res.data.result.cases)\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.el-header,\r\n\t.el-footer {\r\n\t\tbackground-color: #B3C0D1;\r\n\t\tcolor: #333;\r\n\t\ttext-align: center;\r\n\t\tline-height: 200px;\r\n\t}\r\n</style>\r\n"]}]}