{"remainingRequest":"D:\\workspace\\zw\\awesome-pdf\\vue-site\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workspace\\zw\\awesome-pdf\\vue-site\\src\\views\\pdftotext\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workspace\\zw\\awesome-pdf\\vue-site\\src\\views\\pdftotext\\index.vue","mtime":1586080771528},{"path":"D:\\workspace\\zw\\awesome-pdf\\vue-site\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577960050320},{"path":"D:\\workspace\\zw\\awesome-pdf\\vue-site\\node_modules\\babel-loader\\lib\\index.js","mtime":1577960100595},{"path":"D:\\workspace\\zw\\awesome-pdf\\vue-site\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577960050320},{"path":"D:\\workspace\\zw\\awesome-pdf\\vue-site\\node_modules\\vue-loader\\lib\\index.js","mtime":1577960037517}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgYWN0aXZlTmFtZXM6IDAsCiAgICAgICAgICAgIGFjdGlvbjogdGhpcy4kY2xpZW50LmFwaVVybHByZWZpeCgpICsgJy9yZXBvcnRtYW5hZ2UvdXBsb2FkL3BkZicsCiAgICAgICAgICAgIG11bHRpcGxlOiBmYWxzZSwKICAgICAgICAgICAgZmlsZUxpc3Q6IFtdLAogICAgICAgICAgICBnbGlkZXJfaWQ6IHRoaXMuJHJvdXRlLnBhcmFtc1siaWQiXSwKICAgICAgICAgICAgd3JpdGVQcm9ncmVzczogMCwKICAgICAgICAgICAgcmVhZFByb2dyZXNzOiAwLAogICAgICAgICAgICBmaWxlVHlwZTogInN0YXRlIiwKICAgICAgICAgICAgcHJvZmlsZV9pZDogMSwKICAgICAgICAgICAgZmlsZW5hbWU6ICIiLAogICAgICAgICAgICB1cmw6IG51bGwKICAgICAgICB9OwogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIHBkZnRvdGV4dCgpIHsKICAgICAgICAgICAgdmFyIF90aGF0ID0gdGhpcwogICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmZpbGVMaXN0WzBdKQogICAgICAgICAgICBsZXQgdXBsb2FkUGF0aCA9ICJ1cGxvYWRmaWxlc1xcIiArIHRoaXMuZmlsZUxpc3RbMF0ubmFtZQogICAgICAgICAgICB0aGlzLiRheGlvcy5wb3N0KHRoaXMuJGNsaWVudC5hcGlVcmxwcmVmaXgoKSArICIvcmVwb3J0bWFuYWdlL3BkZnRvdGV4dCIsIHsKICAgICAgICAgICAgICAgIHVwbG9hZFBhdGg6IHVwbG9hZFBhdGgKICAgICAgICAgICAgfSwgZnVuY3Rpb24ocmVzKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSkKICAgICAgICAgICAgICAgICBfdGhhdC4kY2xpZW50Lm5vdGlmeVN1Y2Nlc3MoX3RoYXQsICLovazmjaLmiJDlip/vvIzlj6/ku6XkuIvovb3kuoYoKl5fXiopIik7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC8vdGhpcy5maWxlTGlzdCA9IFtdCiAgICAgICAgfSwKICAgICAgICBkb3dubG9hZFRleHQoKSB7CiAgICAgICAgICAgIGxldCB0ZXh0UGF0aCA9ICJ1cGxvYWRmaWxlc1xcIiArIHRoaXMuZmlsZUxpc3RbMF0ubmFtZS5yZXBsYWNlKCJwZGYiLCAidHh0IikKICAgICAgICAgICAgdGhpcy4kYXhpb3MucG9zdCh0aGlzLiRjbGllbnQuYXBpVXJscHJlZml4KCkgKyAiL3JlcG9ydG1hbmFnZS9kb3dubG9hZFRleHQiLCB7CiAgICAgICAgICAgICAgICB0ZXh0UGF0aDogdGV4dFBhdGgKICAgICAgICAgICAgfSwgZnVuY3Rpb24ocmVzKSB7CgogICAgICAgICAgICAgICAgLy9sZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICAgICAgICAgIC8vbGV0IHJlcyA9IGF3YWl0IHBvc3QodXJsLCBmb3JtRGF0YSk7CiAgICAgICAgICAgICAgICBjb25zdCBjb25lbnQgPSByZXMuZGF0YQogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coY29uZW50KTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcykKICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbY29uZW50XSkKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGJsb2IpCiAgICAgICAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9ICLnv7vor5Hnu5PmnpwudHh0Ii8vcmVzLmRhdGEubmFtZS5yZXBsYWNlKCJwZGYiLCAidHh0IikKICAgICAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJykKICAgICAgICAgICAgICAgIGxpbmsuZG93bmxvYWQgPSBmaWxlTmFtZSAvLyBh5qCH562+5re75Yqg5bGe5oCnCiAgICAgICAgICAgICAgICBsaW5rLnN0eWxlLmRpc3BsYXkgPSAnbm9uZScKICAgICAgICAgICAgICAgIGxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYikKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluaykKICAgICAgICAgICAgICAgIGxpbmsuY2xpY2soKSAvLyDmiafooYzkuIvovb0KICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwobGluay5ocmVmKSAvLyDph4rmlL51cmwKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluaykgLy8g6YeKCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBjbGVhclBkZkxpc3QoKSB7CiAgICAgICAgICAgIHZhciBfdGhhdCA9IHRoaXMKICAgICAgICAgICAgdGhpcy4kYXhpb3MuZ2V0KHRoaXMuJGNsaWVudC5hcGlVcmxwcmVmaXgoKSArICIvcmVwb3J0bWFuYWdlL2NsZWFyUGRmTGlzdCIsIHt9LCBmdW5jdGlvbihyZXMpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhLm1lc3NhZ2UpCiAgICAgICAgICAgICAgICBfdGhhdC5maWxlTGlzdCA9IFtdCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBoYW5kbGVSZW1vdmUoZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coZmlsZSwgZmlsZUxpc3QpCiAgICAgICAgfSwKICAgICAgICBoYW5kbGVQcmV2aWV3KGZpbGUpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coZmlsZSk7CiAgICAgICAgfSwKICAgICAgICBiZWZvcmVSZW1vdmUoZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coZmlsZSwgZmlsZUxpc3QpCiAgICAgICAgICAgIHJldHVybiB0aGlzLiRjb25maXJtKGDnoa7lrprnp7vpmaQgJHsgZmlsZS5uYW1lIH3vvJ9gKTsKICAgICAgICB9LAogICAgICAgIGhhbmRsZVByb2dyZXNzKGV2ZW50LCBmaWxlLCBmaWxlTGlzdCkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhldmVudCwgZmlsZSwgZmlsZUxpc3QpOwogICAgICAgICAgICB0aGlzLndyaXRlUHJvZ3Jlc3MgPSBwYXJzZUZsb2F0KGV2ZW50LnBlcmNlbnQudG9GaXhlZCgyKSk7CiAgICAgICAgfSwKICAgICAgICBoYW5kbGVTdWNlc3MocmVzcG9uc2UsIGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgICAgICAgIHRoaXMuZmlsZUxpc3QgPSBmaWxlTGlzdDsKICAgICAgICAgICAgY29uc29sZS5sb2coZXZlbnQsIGZpbGUsIGZpbGVMaXN0KQogICAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkKCkgewogICAgICAgIC8vIHZhciBfdGhhdCA9IHRoaXM7CiAgICAgICAgLy8gdGhpcy4kY2xpZW50Lm5vdGlmeXdzLm5vdGlmeUJ1cy4kb24oInBkZkxpc3QiLCBmdW5jdGlvbihyZXMpIHsKICAgICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKQogICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpCiAgICAgICAgLy8gICAgICAgICBfdGhhdC5maWxlTGlzdCA9IHJlcy5kYXRhCiAgICAgICAgLy8gICAgIH0pCiAgICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/pdftotext","sourcesContent":["<template>\r\n\r\n    <el-row class=\"el-row\">\r\n        <el-col :span=\"8\">\r\n            <el-form :inline=\"true\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n                <el-form-item>\r\n                    <el-button style=\"margin-left: 10px;\" size=\"small\" type=\"success\" @click=\"pdftotext\">pdf转文本</el-button>\r\n                    <el-button style=\"margin-left: 10px;\" size=\"small\" type=\"primary\" @click=\"downloadText\">下载文本</el-button>\r\n                    <el-button style=\"margin-left: 10px;\" size=\"small\" type=\"primary\" @click=\"clearPdfList\">清空数据</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n            <el-upload class=\"upload-demo\" drag :action=\"action\" :multiple=\"multiple\" :on-preview=\"handlePreview\"\r\n                :on-remove=\"handleRemove\" :before-remove=\"beforeRemove\" :on-progress=\"handleProgress\" :on-success=\"handleSucess\"\r\n                :file-list=\"fileList\" name=pdf :limit=\"10\" style=\"height: 1000px; margin: 10px;\">\r\n                <i class=\"el-icon-upload\"></i>\r\n                <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n                <div class=\"el-upload__tip\" slot=\"tip\">只能上传pdf文件</div>\r\n            </el-upload>\r\n        </el-col>\r\n        <el-col :span=\"12\">\r\n            <div class=\"pdfpreview\">\r\n                <object :data=url type=\"application/pdf\" width=\"65%\" height=\"100%\" internalinstanceid=\"41\"></object>\r\n            </div>\r\n        </el-col>\r\n    </el-row>\r\n\r\n</template>\r\n<script>\r\n    export default {\r\n        data() {\r\n            return {\r\n                activeNames: 0,\r\n                action: this.$client.apiUrlprefix() + '/reportmanage/upload/pdf',\r\n                multiple: false,\r\n                fileList: [],\r\n                glider_id: this.$route.params[\"id\"],\r\n                writeProgress: 0,\r\n                readProgress: 0,\r\n                fileType: \"state\",\r\n                profile_id: 1,\r\n                filename: \"\",\r\n                url: null\r\n            };\r\n        },\r\n        computed: {\r\n        },\r\n        methods: {\r\n            pdftotext() {\r\n                var _that = this\r\n                console.log(this.fileList[0])\r\n                let uploadPath = \"uploadfiles\\\\\" + this.fileList[0].name\r\n                this.$axios.post(this.$client.apiUrlprefix() + \"/reportmanage/pdftotext\", {\r\n                    uploadPath: uploadPath\r\n                }, function(res) {\r\n                    console.log(res.data)\r\n                     _that.$client.notifySuccess(_that, \"转换成功，可以下载了(*^_^*)\");\r\n                })\r\n                //this.fileList = []\r\n            },\r\n            downloadText() {\r\n                let textPath = \"uploadfiles\\\\\" + this.fileList[0].name.replace(\"pdf\", \"txt\")\r\n                this.$axios.post(this.$client.apiUrlprefix() + \"/reportmanage/downloadText\", {\r\n                    textPath: textPath\r\n                }, function(res) {\r\n\r\n                    //let formData = new FormData();\r\n                    //let res = await post(url, formData);\r\n                    const conent = res.data\r\n                    // console.log(conent);\r\n                    console.log(res)\r\n                    const blob = new Blob([conent])\r\n                    console.log(blob)\r\n                    const fileName = \"翻译结果.txt\"//res.data.name.replace(\"pdf\", \"txt\")\r\n                    const link = document.createElement('a')\r\n                    link.download = fileName // a标签添加属性\r\n                    link.style.display = 'none'\r\n                    link.href = URL.createObjectURL(blob)\r\n                    document.body.appendChild(link)\r\n                    link.click() // 执行下载\r\n                    URL.revokeObjectURL(link.href) // 释放url\r\n                    document.body.removeChild(link) // 释\r\n                })\r\n            },\r\n            clearPdfList() {\r\n                var _that = this\r\n                this.$axios.get(this.$client.apiUrlprefix() + \"/reportmanage/clearPdfList\", {}, function(res) {\r\n                    console.log(res.data.message)\r\n                    _that.fileList = []\r\n                })\r\n            },\r\n            handleRemove(file, fileList) {\r\n                console.log(file, fileList)\r\n            },\r\n            handlePreview(file) {\r\n                console.log(file);\r\n            },\r\n            beforeRemove(file, fileList) {\r\n                console.log(file, fileList)\r\n                return this.$confirm(`确定移除 ${ file.name }？`);\r\n            },\r\n            handleProgress(event, file, fileList) {\r\n                console.log(event, file, fileList);\r\n                this.writeProgress = parseFloat(event.percent.toFixed(2));\r\n            },\r\n            handleSucess(response, file, fileList) {\r\n                this.fileList = fileList;\r\n                console.log(event, file, fileList)\r\n            }\r\n        },\r\n        mounted() {\r\n            // var _that = this;\r\n            // this.$client.notifyws.notifyBus.$on(\"pdfList\", function(res) {\r\n            //         console.log(res.data)\r\n            //         console.log(res.data)\r\n            //         _that.fileList = res.data\r\n            //     })\r\n        }\r\n    }\r\n</script>\r\n<style>\r\n    /*    .el-upload {\r\n        height: 1000px;\r\n    } */\r\n\r\n    .el-container {\r\n        /*设置内部填充为0，几个布局元素之间没有间距*/\r\n        padding: 0px;\r\n        /*外部间距也是如此设置*/\r\n        margin: 0px;\r\n        /*统一设置高度为100%*/\r\n        height: 100%;\r\n        width: 100%;\r\n    }\r\n\r\n    #app {\r\n        /*设置内部填充为0，几个布局元素之间没有间距*/\r\n        padding: 0px;\r\n        /*外部间距也是如此设置*/\r\n        margin: 0px;\r\n        /*统一设置高度为100%*/\r\n        height: 100%;\r\n        width: 100%;\r\n    }\r\n\r\n    .pdfpreview {\r\n        height: calc(100% - 50px);\r\n        width: 100%;\r\n        position: absolute;\r\n        top: 45px;\r\n        z-index: 999;\r\n    }\r\n</style>\n"]}]}