{"remainingRequest":"D:\\workspace\\yfjz\\leming-reportdesigner\\vue-sites\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workspace\\yfjz\\leming-reportdesigner\\vue-sites\\src\\views\\pdfrender\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workspace\\yfjz\\leming-reportdesigner\\vue-sites\\src\\views\\pdfrender\\index.vue","mtime":1578465407261},{"path":"D:\\workspace\\yfjz\\leming-reportdesigner\\vue-sites\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577960050320},{"path":"D:\\workspace\\yfjz\\leming-reportdesigner\\vue-sites\\node_modules\\babel-loader\\lib\\index.js","mtime":1577960100595},{"path":"D:\\workspace\\yfjz\\leming-reportdesigner\\vue-sites\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577960050320},{"path":"D:\\workspace\\yfjz\\leming-reportdesigner\\vue-sites\\node_modules\\vue-loader\\lib\\index.js","mtime":1577960037517}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIHJlcXVpcmUgY29tcG9uZW50CmltcG9ydCB7CiAgICBjb2RlbWlycm9yCn0gZnJvbSAndnVlLWNvZGVtaXJyb3InCgovLyByZXF1aXJlIHN0eWxlcy8vCmltcG9ydCAnY29kZW1pcnJvci9saWIvY29kZW1pcnJvci5jc3MnCmltcG9ydCAnY29kZW1pcnJvci9tb2RlL3B5dGhvbi9weXRob24uanMnCmltcG9ydCAnY29kZW1pcnJvci90aGVtZS9tYm8uY3NzJwppbXBvcnQgJ2NvZGVtaXJyb3IvdGhlbWUvbW9ub2thaS5jc3MnCmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9zZWxlY3Rpb24vYWN0aXZlLWxpbmUuanMnCmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9lZGl0L2Nsb3NlYnJhY2tldHMuanMnCgovLyBjb21wb25lbnQKZXhwb3J0IGRlZmF1bHQgewogICAgY29tcG9uZW50czogewogICAgICAgIGNvZGVtaXJyb3IKICAgIH0sCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGRhdGE6ICIxMjMzIiwKICAgICAgICAgICAgdXJsOiAiIiwKICAgICAgICAgICAgY21PcHRpb25zOiB7CiAgICAgICAgICAgICAgICAvLyBjb2RlbWlycm9yIG9wdGlvbnMKICAgICAgICAgICAgICAgIHN0eWxlQWN0aXZlTGluZTogdHJ1ZSwKICAgICAgICAgICAgICAgIHRhYlNpemU6IDQsCiAgICAgICAgICAgICAgICBpbmRlbnRVbml0OiA0LCAvLyDmmbrog73nvKnov5vljZXkvY3kuLo05Liq56m65qC86ZW/5bqmCiAgICAgICAgICAgICAgICBpbmRlbnRXaXRoVGFiczogdHJ1ZSwgLy8g5L2/55So5Yi26KGo56ym6L+b6KGM5pm66IO957yp6L+bCiAgICAgICAgICAgICAgICBtb2RlOiAndGV4dC94LXB5dGhvbicsCiAgICAgICAgICAgICAgICAvL2tleU1hcDogInN1YmxpbWUiLCAvLyDlv6vplK7plK7po47moLwgIOS8muWvvOiHtG5leHTplJnor68KICAgICAgICAgICAgICAgIHNtYXJ0SW5kZW50OiB0cnVlLCAvL+aZuuiDvee8qei/mwogICAgICAgICAgICAgICAgbGluZVdyYXBwaW5nOiB0cnVlLCAvLwogICAgICAgICAgICAgICAgdGhlbWU6ICdtb25va2FpJywKICAgICAgICAgICAgICAgIGxpbmVOdW1iZXJzOiB0cnVlLAogICAgICAgICAgICAgICAgbGluZTogdHJ1ZSwKICAgICAgICAgICAgICAgIGd1dHRlcnM6IFsiQ29kZU1pcnJvci1saW5lbnVtYmVycyIsICJDb2RlTWlycm9yLWZvbGRndXR0ZXIiXSwKICAgICAgICAgICAgICAgIGhpZ2hsaWdodFNlbGVjdGlvbk1hdGNoZXM6IHsKICAgICAgICAgICAgICAgICAgICBzaG93VG9rZW46IC9cdy8sCiAgICAgICAgICAgICAgICAgICAgYW5ub3RhdGVTY3JvbGxiYXI6IHRydWUKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBmb2xkR3V0dGVyOiB0cnVlLAogICAgICAgICAgICAgICAgY2xvc2VicmFja2V0czogdHJ1ZQogICAgICAgICAgICAgICAgLy8gbW9yZSBjb2RlbWlycm9yIG9wdGlvbnMsIOabtOWkmiBjb2RlbWlycm9yIOeahOmrmOe6p+mFjee9ri4uLgogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBvbkNtUmVhZHkoY20pIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ3RoZSBlZGl0b3IgaXMgcmVhZGllZCEnLCBjbSkKICAgICAgICB9LAogICAgICAgIG9uQ21Gb2N1cyhjbSkgewogICAgICAgICAgICBjb25zb2xlLmxvZygndGhlIGVkaXRvciBpcyBmb2N1cyEnLCBjbSkKICAgICAgICB9LAogICAgICAgIG9uQ21Db2RlQ2hhbmdlKG5ld0NvZGUpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ3RoaXMgaXMgbmV3IGNvZGUnLCBuZXdDb2RlKQogICAgICAgICAgICB0aGlzLmRhdGEgPSBuZXdDb2RlCiAgICAgICAgfSwKICAgICAgICBwZGZyZW5kZXIoKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfmuLLmn5PohJrmnKwnKTsKICAgICAgICAgICAgdmFyIF90aGF0ID0gdGhpczsKICAgICAgICAgICAgdGhpcy4kYXhpb3MucG9zdCgicmVwb3J0L3JlcG9ydG1hbmFnZS9zZXREYXRhIiwgSlNPTi5wYXJzZSh0aGlzLmRhdGEpLCBmdW5jdGlvbihyZXMpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKQogICAgICAgICAgICB9KQogICAgICAgICAgICBsZXQgcmVwb3J0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncmVwb3J0JykpCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHR5cGVvZihyZXBvcnQpKQogICAgICAgICAgICByZXBvcnQuZGF0YSA9IEpTT04ucGFyc2UodGhpcy5kYXRhKQogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXBvcnQpCiAgICAgICAgICAgIHRoaXMuJGF4aW9zLnBvc3QoInJlcG9ydC9yZXBvcnRtYW5hZ2UvcGRmR2VuZXJhdGUiLCByZXBvcnQsIGZ1bmN0aW9uKHJlcykgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEubWVzc2FnZSkKICAgICAgICAgICAgICAgIF90aGF0LnVybCA9ICJodHRwOi8vMTI3LjAuMC4xOjg4MDAvcmVwb3J0L3JlcG9ydC9ydW4/a2V5PSIgKyByZXMuZGF0YS5tZXNzYWdlOwoKICAgICAgICAgICAgfSkKICAgICAgICB9CiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICB2YXIgX3RoYXQgPSB0aGlzCiAgICAgICAgdGhpcy4kYXhpb3MuZ2V0KCJyZXBvcnQvcmVwb3J0bWFuYWdlL2dldERhdGEiLCB7fSwgZnVuY3Rpb24ocmVzKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhLm1lc3NhZ2UpCiAgICAgICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5yZXRjb2RlID09IDApIHsKICAgICAgICAgICAgICAgICAgICAvLyDlsIZqc29uIOi9rOaNouS4uiBzdHJpbmcg5bm25LiUIOS8mOe+juWxleekugogICAgICAgICAgICAgICAgICAgIF90aGF0LmRhdGEgPSBKU09OLnN0cmluZ2lmeShyZXMuZGF0YS5tZXNzYWdlLCBudWxsLCA0KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSkKICAgIH0KCn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"index.vue","sourceRoot":"src/views/pdfrender","sourcesContent":["<template>\r\n\r\n    <el-row>\r\n        <el-col :span=\"12\">\r\n            <el-menu class=\"el-menu-demo\" mode=\"horizontal\">\r\n                <el-menu-item index=\"1\" @click=\"pdfrender()\">生成报告</el-menu-item>\r\n            </el-menu>\r\n            <div class=\"codemirror\">\r\n                <codemirror v-model=\"data\" :options=\"cmOptions\"></codemirror>\r\n            </div>\r\n        </el-col>\r\n        <el-col :span=\"12\">\r\n            <div class=\"pdfpreview\">\r\n                <object :data=url type=\"application/pdf\" width=\"50%\" height=\"100%\" internalinstanceid=\"41\"></object>\r\n            </div>\r\n        </el-col>\r\n    </el-row>\r\n\r\n\r\n</template>\r\n\r\n<script>\r\n    // require component\r\n    import {\r\n        codemirror\r\n    } from 'vue-codemirror'\r\n\r\n    // require styles//\r\n    import 'codemirror/lib/codemirror.css'\r\n    import 'codemirror/mode/python/python.js'\r\n    import 'codemirror/theme/mbo.css'\r\n    import 'codemirror/theme/monokai.css'\r\n    import 'codemirror/addon/selection/active-line.js'\r\n    import 'codemirror/addon/edit/closebrackets.js'\r\n\r\n    // component\r\n    export default {\r\n        components: {\r\n            codemirror\r\n        },\r\n        data() {\r\n            return {\r\n                data: \"1233\",\r\n                url: \"\",\r\n                cmOptions: {\r\n                    // codemirror options\r\n                    styleActiveLine: true,\r\n                    tabSize: 4,\r\n                    indentUnit: 4, // 智能缩进单位为4个空格长度\r\n                    indentWithTabs: true, // 使用制表符进行智能缩进\r\n                    mode: 'text/x-python',\r\n                    //keyMap: \"sublime\", // 快键键风格  会导致next错误\r\n                    smartIndent: true, //智能缩进\r\n                    lineWrapping: true, //\r\n                    theme: 'monokai',\r\n                    lineNumbers: true,\r\n                    line: true,\r\n                    gutters: [\"CodeMirror-linenumbers\", \"CodeMirror-foldgutter\"],\r\n                    highlightSelectionMatches: {\r\n                        showToken: /\\w/,\r\n                        annotateScrollbar: true\r\n                    },\r\n                    foldGutter: true,\r\n                    closebrackets: true\r\n                    // more codemirror options, 更多 codemirror 的高级配置...\r\n                }\r\n            }\r\n        },\r\n        methods: {\r\n            onCmReady(cm) {\r\n                console.log('the editor is readied!', cm)\r\n            },\r\n            onCmFocus(cm) {\r\n                console.log('the editor is focus!', cm)\r\n            },\r\n            onCmCodeChange(newCode) {\r\n                console.log('this is new code', newCode)\r\n                this.data = newCode\r\n            },\r\n            pdfrender() {\r\n                console.log('渲染脚本');\r\n                var _that = this;\r\n                this.$axios.post(\"report/reportmanage/setData\", JSON.parse(this.data), function(res) {\r\n                    console.log(res.data)\r\n                })\r\n                let report = JSON.parse(localStorage.getItem('report'))\r\n                console.log(typeof(report))\r\n                report.data = JSON.parse(this.data)\r\n                console.log(report)\r\n                this.$axios.post(\"report/reportmanage/pdfGenerate\", report, function(res) {\r\n                    console.log(res.data.message)\r\n                    _that.url = \"http://127.0.0.1:8800/report/report/run?key=\" + res.data.message;\r\n\r\n                })\r\n            }\r\n        },\r\n        mounted() {\r\n            var _that = this\r\n            this.$axios.get(\"report/reportmanage/getData\", {}, function(res) {\r\n                console.log(res.data.message)\r\n                if (res) {\r\n                    if (res.data.retcode == 0) {\r\n                        // 将json 转换为 string 并且 优美展示\r\n                        _that.data = JSON.stringify(res.data.message, null, 4);\r\n                        return true;\r\n                    } else {\r\n                        return false;\r\n                    }\r\n                }\r\n            })\r\n        }\r\n\r\n    }\r\n</script>\r\n<style>\r\n    .CodeMirror {\r\n        overflow-y: scroll;\r\n        height: 900px;\r\n    }\r\n\r\n    .CodeMirror-focused .cm-matchhighlight {\r\n        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAYAAABytg0kAAAAFklEQVQI12NgYGBgkKzc8x9CMDAwAAAmhwSbidEoSQAAAABJRU5ErkJggg==);\r\n        background-position: bottom;\r\n        background-repeat: repeat-x;\r\n    }\r\n\r\n    .cm-matchhighlight {\r\n        background-color: lightgreen\r\n    }\r\n\r\n    .CodeMirror-selection-highlight-scrollbar {\r\n        background-color: green\r\n    }\r\n\r\n    .pdfpreview {\r\n        height: calc(100% - 50px);\r\n        width: 100%;\r\n        position: absolute;\r\n        top: 45px;\r\n    }\r\n</style>\n"]}]}