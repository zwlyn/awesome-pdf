{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-2d0d03cc\"],{\"66b8\":function(e,t,a){\"use strict\";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"div\",[a(\"el-form\",{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",staticStyle:{padding:\"10px\",\"padding-bottom\":\"0px\"},attrs:{inline:!0,\"label-width\":\"100px\"}},[a(\"el-form-item\",[a(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v(\"新建模板\")])],1)],1),a(\"el-dialog\",{staticStyle:{height:\"auto\"},attrs:{title:\"新建模板\",visible:e.dialogFormVisible},on:{\"update:visible\":function(t){e.dialogFormVisible=t}}},[a(\"el-form\",[a(\"el-form-item\",{attrs:{label:\"模板名称\"}},[a(\"el-input\",{attrs:{\"auto-complete\":\"off\"},model:{value:e.templateName,callback:function(t){e.templateName=t},expression:\"templateName\"}})],1),a(\"el-form-item\",{attrs:{label:\"继承已有模板\"}},[a(\"el-switch\",{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\"},model:{value:e.useTemplate,callback:function(t){e.useTemplate=t},expression:\"useTemplate\"}})],1)],1),a(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(\"取 消\")]),a(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.newTemplate()}}},[e._v(\"确 定\")])],1),e.useTemplate?a(\"div\",[a(\"el-select\",{attrs:{filterable:\"\",placeholder:\"请选择\"},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:\"selectValue\"}},e._l(e.tableData,(function(e){return a(\"el-option\",{key:e,attrs:{label:e,value:e}})})),1)],1):e._e()],1),a(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize)}},[a(\"el-divider\"),a(\"el-table-column\",{attrs:{label:\"报告名称\",width:\"400\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"span\",{staticStyle:{\"margin-left\":\"10px\"}},[e._v(e._s(t.row))])]}}])}),a(\"el-table-column\",{attrs:{label:\"操作\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{size:\"mini\"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v(\"编辑\")]),a(\"el-button\",{attrs:{size:\"mini\"},on:{click:function(a){return e.handleRender(t.$index,t.row)}}},[e._v(\"报告生成\")]),a(\"el-button\",{attrs:{size:\"mini\"},on:{click:function(a){return e.dataManage(t.$index,t.row)}}},[e._v(\"数据管理\")]),a(\"el-button\",{attrs:{size:\"mini\",type:\"danger\"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v(\"删除\")])]}}])})],1)],1),a(\"div\",[a(\"el-pagination\",{attrs:{\"current-page\":e.currentPage,\"page-sizes\":[10,20,30,50,100],\"page-size\":e.pageSize,layout:\"total, sizes, prev, pager, next, jumper\",total:e.tableData.length,width:\"300\"},on:{\"size-change\":e.handleSizeChange,\"current-change\":e.handleCurrentChange}})],1)])},i=[],n={data:function(){return{selectValue:\"\",dialogFormVisible:!1,useTemplate:!0,tableData:[],templateName:\"\",action:this.$client.apiUrlprefix()+\"/reportmanage/upload/template\",fileList:[],isPagination:!1,currentPage:1,pageSize:10}},methods:{newTemplate:function(){console.log(\"newTemplate\"),this.$axios.post(this.$client.apiUrlprefix()+\"/reportmanage/newTemplate\",{templateName:this.templateName,sample:this.selectValue},(function(e){console.log(e.data.message)})),this.dialogFormVisible=!1},handleSizeChange:function(e){this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e},handleEdit:function(e,t){console.log(e,t),this.$axios.post(this.$client.apiUrlprefix()+\"/reportmanage/setTemplate\",{name:t},(function(e){if(e)return 0==e.data.retcode})),this.$router.push({name:\"reportedit\"})},dataManage:function(e,t){window.localStorage.setItem(\"currentTemplate\",t),this.$router.push({name:\"datamanage\"})},handleDelete:function(e,t){console.log(e,t),this.$axios.post(this.$client.apiUrlprefix()+\"/reportmanage/delTemplate\",{templateName:t},(function(e){if(console.log(e),e)return 0==e.data.retcode}))},handleRender:function(e,t){console.log(e,t),this.$axios.post(this.$client.apiUrlprefix()+\"/reportmanage/setTemplate\",{templateName:t},(function(e){if(e)return 0==e.data.retcode})),this.$router.push({name:\"pdfrender\"})}},mounted:function(){var e=this;this.$client.notifyws.notifyBus.$on(\"templatesList\",(function(t){console.log(t.data.templatesList),e.tableData=t.data.templatesList})),this.$axios.get(this.$client.apiUrlprefix()+\"/reportmanage/templatesList\",{},(function(t){if(console.log(t),t)return 0==t.data.retcode&&(console.log(t.data.message.templatesList),e.tableData=t.data.message.templatesList,!0)}))}},o=n,r=a(\"2877\"),s=Object(r[\"a\"])(o,l,i,!1,null,null,null);t[\"default\"]=s.exports}}]);","extractedComments":[]}