{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-36f1bf56\"],{\"1f91\":function(e,t,a){},\"466d\":function(e,t,a){\"use strict\";var s=a(\"d784\"),o=a(\"825a\"),r=a(\"50c4\"),i=a(\"1d80\"),l=a(\"8aa5\"),n=a(\"14c3\");s(\"match\",1,(function(e,t,a){return[function(t){var a=i(this),s=void 0==t?void 0:t[e];return void 0!==s?s.call(t,a):new RegExp(t)[e](String(a))},function(e){var s=a(t,e,this);if(s.done)return s.value;var i=o(e),c=String(this);if(!i.global)return n(i,c);var u=i.unicode;i.lastIndex=0;var p,d=[],m=0;while(null!==(p=n(i,c))){var h=String(p[0]);d[m]=h,\"\"===h&&(i.lastIndex=l(c,r(i.lastIndex),u)),m++}return 0===m?null:d}]}))},\"4de9\":function(e,t,a){\"use strict\";var s=a(\"6bdf\"),o=a.n(s);o.a},\"6bdf\":function(e,t,a){},\"6ee4\":function(e,t,a){\"use strict\";var s=a(\"1f91\"),o=a.n(s);o.a},ddda:function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"el-form\",{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",attrs:{\"label-width\":\"100px\"}},[a(\"el-form-item\",{attrs:{label:\"项目名称\",prop:\"projectname\"}},[a(\"el-row\",{staticClass:\"demo-autocomplete\"},[a(\"el-col\",{staticStyle:{width:\"100%\"}},[a(\"div\",{staticClass:\"sub-title\"}),a(\"el-autocomplete\",{staticClass:\"inline-input\",staticStyle:{width:\"100%\"},attrs:{\"fetch-suggestions\":e.querySearch,placeholder:\"请选择项目名称或输入新项目名称\"},on:{select:e.handleSelect},model:{value:e.projectname,callback:function(t){e.projectname=t},expression:\"projectname\"}})],1)],1)],1),a(\"el-form-item\",{attrs:{label:\"用例名称\",prop:\"name\"}},[a(\"el-input\",{attrs:{autocomplete:\"off\",oninput:\"value=value.replace(/\\\\W/g,'')\"},model:{value:e.name,callback:function(t){e.name=t},expression:\"name\"}})],1),a(\"el-form-item\",{attrs:{label:\"描述信息\",prop:\"description\"}},[a(\"el-input\",{attrs:{autocomplete:\"off\"},model:{value:e.description,callback:function(t){e.description=t},expression:\"description\"}})],1),a(\"el-form-item\",{attrs:{label:\"混合比\"}},[a(\"el-input\",{attrs:{autocomplete:\"off\",oninput:\"value=value.replace(/\\\\D/g,'')\"},model:{value:e.mix,callback:function(t){e.mix=e._n(t)},expression:\"mix\"}})],1),a(\"el-form-item\",[a(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.startRecord()}}},[e._v(\"启动录制\")]),a(\"el-button\",{on:{click:function(t){return e.stopRecord()}}},[e._v(\"停止录制\")]),a(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.testAll()}}},[e._v(\"测试用例\")])],1)],1),a(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:e.tableData}},[a(\"el-table-column\",{attrs:{type:\"expand\"},scopedSlots:e._u([{key:\"default\",fn:function(e){return[a(\"http-card\",{attrs:{api:e.row}})]}}])}),a(\"el-table-column\",{attrs:{label:\"Method\",prop:\"method\"}}),a(\"el-table-column\",{attrs:{label:\"Url\",prop:\"simpleUrl\"}}),a(\"el-table-column\",{attrs:{prop:\"status\",label:\"状态\",width:\"100\"}})],1)],1)},o=[],r=(a(\"a4d3\"),a(\"e01a\"),a(\"4de4\"),a(\"c975\"),a(\"b0c0\"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"el-tabs\",[a(\"el-tab-pane\",{attrs:{label:\"General\"}},[a(\"el-card\",{staticClass:\"box-card\"},[a(\"el-form\",{attrs:{\"label-position\":\"right\",\"label-width\":\"250px\"}},[a(\"el-form-item\",{attrs:{title:e.url,label:\"Request URL:\"}},[a(\"el-button\",[e._v(e._s(e.RequestURL))])],1),a(\"el-form-item\",{attrs:{label:\"Request Method:\"}},[a(\"el-button\",[e._v(e._s(e.RequestMethod))])],1),a(\"el-form-item\",{attrs:{label:\"Status Code:\"}},[a(\"el-button\",[e._v(e._s(e.StatusCode))])],1),a(\"el-form-item\",{attrs:{label:\"Remote Address:\"}},[a(\"el-button\",[e._v(e._s(e.RemoteAddress))])],1),a(\"el-form-item\",{attrs:{label:\"Referrer Policy:\"}},[a(\"el-button\",[e._v(e._s(e.ReferrerPolicy))])],1)],1)],1)],1),a(\"el-tab-pane\",{attrs:{label:\"Request Headers\"}},[a(\"el-card\",{staticClass:\"box-card\"},[a(\"el-form\",{attrs:{\"label-position\":\"right\",\"label-width\":\"250px\"}},e._l(e.requestHeaders,(function(t,s){return a(\"el-form-item\",{key:s,attrs:{label:s+\":\"}},[a(\"el-button\",[e._v(e._s(t))])],1)})),1)],1)],1),e.RequestParams?a(\"el-tab-pane\",{attrs:{label:\"Request Params\"}},[a(\"el-card\",{staticClass:\"box-card\"},[a(\"el-form\",{attrs:{\"label-position\":\"top\",\"label-width\":\"250px\"}},[a(\"el-form-item\",{attrs:{label:\"Request Params:\"}},[a(\"el-input\",{attrs:{type:\"textarea\",autosize:{minRows:10,maxRows:15},placeholder:\"\"},model:{value:e.RequestParams,callback:function(t){e.RequestParams=t},expression:\"RequestParams\"}})],1)],1)],1)],1):e._e(),a(\"el-tab-pane\",{attrs:{label:\"Response Headers\"}},[a(\"el-card\",{staticClass:\"box-card\"},[a(\"el-form\",{attrs:{\"label-position\":\"right\",\"label-width\":\"250px\"}},e._l(e.responseHeaders,(function(t,s){return a(\"el-form-item\",{key:s,attrs:{label:s+\":\"}},[a(\"el-button\",[e._v(e._s(t))])],1)})),1)],1)],1),e.ResponseBody?a(\"el-tab-pane\",{attrs:{label:\"Response Body\"}},[a(\"el-card\",{staticClass:\"box-card\"},[a(\"el-form\",{attrs:{\"label-position\":\"top\",\"label-width\":\"250px\"}},[a(\"el-form-item\",{attrs:{label:\"Response Body:\"}},[a(\"el-input\",{attrs:{type:\"textarea\",autosize:{minRows:10,maxRows:15},placeholder:\"\"},model:{value:e.ResponseBody,callback:function(t){e.ResponseBody=t},expression:\"ResponseBody\"}})],1)],1)],1)],1):e._e()],1)}),i=[],l=(a(\"466d\"),{props:[\"api\"],data:function(){return{url:\"\",RequestURL:\"\",RequestMethod:\"\",StatusCode:\"\",RemoteAddress:\"\",ReferrerPolicy:\"\",responseHeaders:{},requestHeaders:{},RequestParams:\"\",ResponseBody:\"\"}},methods:{beautySub:function(e,t){var a=/[\\u4e00-\\u9fa5]/g,s=e.substring(0,t),o=~~(s.match(a)&&s.match(a).length),r=2*s.length-o;return e.substr(0,r)+(r<e.length?\"...\":\"\")}},mounted:function(){this.api&&(this.api.rawResponse&&(this.StatusCode=this.api.rawResponse.response.status+\" \"+this.api.rawResponse.response.statusText,this.RemoteAddress=this.api.rawResponse.response.remoteIPAddress,this.responseHeaders=this.api.rawResponse.response.headers,this.api.rawResponse.data&&(this.ResponseBody=!!this.api.rawResponse.data.body&&this.api.rawResponse.data.body)),this.api.url&&(this.RequestURL=this.beautySub(this.api.url,60),this.url=this.api.url),this.api.rawRequest&&this.api.rawRequest.request&&(this.RequestMethod=this.api.rawRequest.request.method,this.ReferrerPolicy=this.api.rawRequest.request.referrerPolicy,this.requestHeaders=this.api.rawRequest.request.headers),this.RequestParams=\"\"!==this.api.requestParam&&this.api.requestParam)}}),n=l,c=(a(\"6ee4\"),a(\"2877\")),u=Object(c[\"a\"])(n,r,i,!1,null,null,null),p=u.exports,d={data:function(){return{tableData:[],status:\"\",couldTest:!1,name:\"\",projectname:\"\",description:\"\",restaurants:[],mix:\"1\",projectList:[]}},components:{HttpCard:p},methods:{loadAll:function(){var e=this;return this.$axios.get(this.$client.apiUrlprefix()+\"/webapiscraper/project/list\",{},(function(t){console.log(t.data.projectList);for(var a=0;a<t.data.projectList.length;a++){var s={};s.value=t.data.projectList[a],e.projectList.push(s)}})),this.projectList},handleSelect:function(e){console.log(e),this.projectname=e.value,this.$axios.post(this.$client.apiUrlprefix()+\"/webapiscraper/project/set\",{name:this.projectname},(function(e){if(console.log(e),e)return 0==e.data.retcode}))},querySearch:function(e,t){var a=this.restaurants,s=e?a.filter(this.createFilter(e)):a;t(s)},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},OnResponse:function(e){for(var t=[],a=0;a<e.length;a++)if(this.name===e[a].name)for(var s=e[a].apis,o=0;o<s.length;o++){var r=s[o];t.push(r)}this.tableData=t},startRecord:function(){this.setStorage();var e={caseID:this.name,description:this.description,mix:this.mix,projectName:this.projectname};if(console.log(\"启动录制\"),console.log(this.name),\"\"==this.name||void 0===this.name)return console.log(\"输入有误\"),void this.$client.notifyError(this,\"启动录制失败\",\"用例名称不能为空！\",4e3);if(\"\"==this.projectname||void 0==this.projectname)return console.log(\"输入有误\"),void this.$client.notifyError(this,\"启动录制失败\",\"项目名称不能为空！\",4e3);var t=this;this.$axios.post(this.$client.apiUrlprefix()+\"/webapiscraper/monitor/start\",e,(function(e){console.log(e),0==e.data.retcode||t.$client.notifyError(t,\"启动录制失败\",\"输入参数有误！\",4e3)}))},stopRecord:function(){var e=this;console.log(this.name,this.description);var t={caseID:this.name,description:this.description};this.$axios.post(this.$client.apiUrlprefix()+\"/webapiscraper/monitor/end\",t,(function(t){console.log(t),0===t.data.retcode?(e.$client.notifySuccess(e,\"已经停止录制\"),e.status=\"已停止录制\"):e.$client.notifyError(e,\"停止录制失败\")}))},testAll:function(){var e=this;e.tableData!=[]?(e.$client.notifySuccess(e,\"正在测试中...\"),this.$axios.post(this.$client.apiUrlprefix()+\"/webapiscraper/testAll\",this.tableData,(function(t){console.log(t.data.message);for(var a=t.data.message,s=0;s<a.length;s++)\"Failed\"===a[s].status&&(e.status=e.name+\" 测试不通过!\");s>=a.length&&(e.status=e.name+\" 测试通过!\"),e.tableData=a,e.$client.notifySuccess(e,\"测试结束请看网址的状态\")}))):e.$client.notifyError(e,\"数据为空不能进行测试！\")},setStorage:function(){localStorage.setItem(\"caseID\",this.name),localStorage.setItem(\"description\",this.description),localStorage.setItem(\"mix\",this.mix),localStorage.setItem(\"projectName\",this.projectname),console.log(\"已经成功暂存\")},getStorage:function(){this.name=localStorage.getItem(\"caseID\"),this.description=localStorage.getItem(\"description\"),this.mix=localStorage.getItem(\"mix\"),this.projectname=localStorage.getItem(\"projectName\"),console.log(\"已经获得暂存\")}},mounted:function(){void 0==localStorage.getItem(\"caseID\")&&void 0==localStorage.getItem(\"description\")&&void 0==localStorage.getItem(\"mix\")&&void 0==localStorage.getItem(\"projectName\")||this.getStorage(),this.restaurants=this.loadAll();var e=this;this.$client.notifyws.notifyBus.$on(\"WebApiScaperNotifyStatus\",(function(t){-1==t.code?(e.$client.notifyError(e,\"录制启动失败\",\"请先打开chrome浏览器！\",4e3),console.log(\"录制启动失败\",\"请先打开chrome浏览器！\")):0==t.code?(e.$client.notifySuccess(e,\"录制启动成功\",\"请打开弹出的页面进行录制操作！\",4e3),console.log(\"录制启动成功\",\"请打开弹出的页面进行录制操作！\")):1==t.code&&(e.$client.notifySuccess(e,\"录制启动成功\",\"请在已经打开的页面接着录制操作！\",4e3),console.log(\"录制启动成功\",\"请在已经打开的页面接着录制操作！\"))})),this.$client.notifyws.notifyBus.$on(\"WebApiScaperData\",(function(t){e.OnResponse(t.data.cases)})),this.$axios.get(this.$client.apiUrlprefix()+\"/webapiscraper/result\",{},(function(t){if(console.log(t),t)return 0==t.data.retcode&&(console.log(t.data.result.cases),e.OnResponse(t.data.result.cases),!0)}))}},m=d,h=(a(\"4de9\"),Object(c[\"a\"])(m,s,o,!1,null,null,null));t[\"default\"]=h.exports}}]);","extractedComments":[]}